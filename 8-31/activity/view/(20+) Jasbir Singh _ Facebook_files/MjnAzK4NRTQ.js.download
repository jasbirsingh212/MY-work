if (self.CavalryLogger) { CavalryLogger.start_js(["NoB8L"]); }

__d("ProfileCometProfilePictureSetMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"},{defaultValue:null,kind:"LocalArgument",name:"isPage"},{defaultValue:null,kind:"LocalArgument",name:"isProfile"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],b=[{kind:"Variable",name:"input_data",variableName:"input"}],c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={kind:"Variable",name:"scale",variableName:"scale"},e={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},f=[e],g={alias:"profilePic20",args:[{kind:"Literal",name:"height",value:20},d,{kind:"Literal",name:"width",value:20}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:f,storageKey:null},h=[{kind:"Literal",name:"height",value:60},d,{kind:"Literal",name:"width",value:60}],i={alias:"profilePic60",args:h,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:f,storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},k={kind:"TypeDiscriminator",abstractKey:"__isProfile"},l={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null};e={alias:null,args:[d],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[n,e,o],storageKey:null};var p={alias:null,args:null,kind:"ScalarField",name:"profile_picture_expiration_time",storageKey:null},q={alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"DirectInboxBroadcastBucketConnection",kind:"LinkedField",name:"story_bucket",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageThreadBucket",kind:"LinkedField",name:"nodes",plural:!0,selections:[c,{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[c,{alias:null,args:null,concreteType:"StoryCardSeenState",kind:"LinkedField",name:"story_card_seen_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_seen_by_viewer",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"story_bucket(first:1)"},r=[q],s={alias:null,args:[{kind:"Literal",name:"site",value:"www"}],kind:"ScalarField",name:"url",storageKey:'url(site:"www")'};n={alias:"viewer_image",args:[{kind:"Literal",name:"context",value:"comet_media_viewer"},{kind:"Literal",name:"height",value:1e6},d,{kind:"Literal",name:"width",value:1e6}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[n,o],storageKey:null};o={alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"associated_video",plural:!1,selections:[s,c],storageKey:null};var t={alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"profile_photo",plural:!1,selections:[c,m,n],storageKey:null},u={alias:"profilePic160",args:[{kind:"Literal",name:"height",value:160},d,{kind:"Literal",name:"width",value:160}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:f,storageKey:null},v={alias:null,args:null,concreteType:"ProfileVideo",kind:"LinkedField",name:"profile_video",plural:!1,selections:[o,c],storageKey:null},w=[k,{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"profile_photo",plural:!1,selections:[m,n,c],storageKey:null},u,v,{alias:null,args:null,kind:"ScalarField",name:"profile_picture_is_silhouette",storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"ProfileCometProfilePictureSetMutation",selections:[{alias:null,args:b,concreteType:"ProfilePictureResponsePayload",kind:"LinkedField",name:"profile_picture_set",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"profile",plural:!1,selections:[c,{condition:"isPage",kind:"Condition",passingValue:!0,selections:[g,i,{args:null,kind:"FragmentSpread",name:"CometPageProfilePicture_page"},{args:null,kind:"FragmentSpread",name:"CometPageProfilePictureEditThumbnailAction_page"}]},{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePictureSetMutation_profile"}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{condition:"isProfile",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"CometSettingsDropdownHeader_viewer"}]}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ProfileCometProfilePictureSetMutation",selections:[{alias:null,args:b,concreteType:"ProfilePictureResponsePayload",kind:"LinkedField",name:"profile_picture_set",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"profile",plural:!1,selections:[j,c,k,{alias:"profilePic32",args:[{kind:"Literal",name:"height",value:32},d,{kind:"Literal",name:"width",value:32}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:f,storageKey:null},{alias:"profilePic40",args:[{kind:"Literal",name:"height",value:40},d,{kind:"Literal",name:"width",value:40}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:f,storageKey:null},{condition:"isPage",kind:"Condition",passingValue:!0,selections:[g,i,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_business_page_active",storageKey:null},l,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"pages_story_bucket_v2",plural:!1,selections:[j,c,{alias:null,args:null,kind:"ScalarField",name:"is_bucket_eligible_for_display",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_bucket_seen_by_viewer",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"profile_photo",plural:!1,selections:[m,c,e],storageKey:null},{alias:null,args:[{kind:"Literal",name:"height",value:132},d,{kind:"Literal",name:"width",value:132}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:f,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_edit_profile",storageKey:null}],type:"Page",abstractKey:null}]},{condition:"isProfile",kind:"Condition",passingValue:!0,selections:[p,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},{alias:null,args:[{kind:"Literal",name:"render_location",value:"PROFILE_PICTURE"}],concreteType:"ProfileActiveMessengerRoom",kind:"LinkedField",name:"profile_active_messenger_room",plural:!1,selections:[{documentName:"ProfileCometProfilePictureContainer_user",fragmentName:"ProfileCometProfilePictureMessengerRoomPill_profile_active_messenger_room",fragmentPropName:"profile_active_messenger_room",kind:"ModuleImport"}],storageKey:'profile_active_messenger_room(render_location:"PROFILE_PICTURE")'},q,{alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"profile_photo",plural:!1,selections:[c,e],storageKey:null},{alias:null,args:[{kind:"Literal",name:"height",value:50},d,{kind:"Literal",name:"width",value:50}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:f,storageKey:null},{"if":null,kind:"Defer",label:"ProfileCometProfilePictureContainer_user$defer$ProfileCometProfilePictureEditButton_user",selections:r},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]},{"if":null,kind:"Defer",label:"ProfileCometProfilePicture_user$defer$ProfileCometLockedProfilePopover_user",selections:[l,{alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null}]},{"if":null,kind:"Defer",label:"ProfileCometProfilePicture_user$defer$ProfileCometProfilePictureViewMenu_user",selections:r},{"if":null,kind:"Defer",label:"ProfileCometProfilePicture_user$defer$ProfileCometProfilePictureEditMenu_user",selections:r},{"if":null,kind:"Defer",label:"ProfileCometProfilePicture_user$defer$ProfileCometProfilePictureTemporaryEditMenu_user",selections:r}],type:"User",abstractKey:null},{"if":null,kind:"Defer",label:"ProfileCometProfilePicture_profile$defer$ProfileCometProfilePictureContainer_profile",selections:[k,l,{alias:"profilePhoto",args:null,concreteType:"Photo",kind:"LinkedField",name:"profile_photo",plural:!1,selections:[s,n,c],storageKey:null},{alias:"profilePicNormal",args:[{kind:"Literal",name:"height",value:168},d,{kind:"Literal",name:"width",value:168}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:f,storageKey:null},{alias:"profilePicSmall",args:[{kind:"Literal",name:"height",value:100},d,{kind:"Literal",name:"width",value:100}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:f,storageKey:null},{alias:null,args:null,concreteType:"ProfileVideo",kind:"LinkedField",name:"profile_video",plural:!1,selections:[o,c,{"if":null,kind:"Defer",label:"ProfileCometProfilePictureContainer_profile$defer$TetraProfileVideoSection_profileVideo",selections:[{documentName:"TetraProfileVideoSection_profileVideo",fragmentName:"TetraProfileVideo_profileVideo",fragmentPropName:"profileVideo",kind:"ModuleImport"}]}],storageKey:null},{"if":null,kind:"Defer",label:"ProfileCometProfilePictureContainer_profile$defer$ProfileCometProfilePictureEditButton_profile",selections:[k,p,t,u,v]}]},{"if":null,kind:"Defer",label:"ProfileCometProfilePicture_profile$defer$ProfileCometProfilePictureEditMenu_profile",selections:w},{"if":null,kind:"Defer",label:"ProfileCometProfilePicture_profile$defer$ProfileCometProfilePictureTemporaryEditMenu_profile",selections:[k,t,p,u,v]},{"if":null,kind:"Defer",label:"ProfileCometProfilePicture_profile$defer$ProfileCometProfilePictureViewMenu_profile",selections:w}]}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{condition:"isProfile",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[j,l,{alias:"settings_dropdown_profile_picture",args:h,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:f,storageKey:null},c,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"should_use_page_rename",storageKey:null},{alias:"profileSwitcherEligibleProfiles",args:null,concreteType:"UserProfileSwitcherEligibleProfilesConnection",kind:"LinkedField",name:"profile_switcher_eligible_profiles",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null}],type:"User",abstractKey:null}],storageKey:null}]}],storageKey:null}],storageKey:null}]},params:{id:"4764657900211802",metadata:{},name:"ProfileCometProfilePictureSetMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("ProfileCometProfilePictureSetMutation_profile.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"Variable",name:"scale",variableName:"scale"},b=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}];return{argumentDefinitions:[{kind:"RootArgument",name:"isProfile"},{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"ProfileCometProfilePictureSetMutation_profile",selections:[{alias:"profilePic32",args:[{kind:"Literal",name:"height",value:32},a,{kind:"Literal",name:"width",value:32}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:b,storageKey:null},{alias:"profilePic40",args:[{kind:"Literal",name:"height",value:40},a,{kind:"Literal",name:"width",value:40}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:b,storageKey:null},{condition:"isProfile",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePicture_user"},{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePicture_profile"},{args:null,kind:"FragmentSpread",name:"ProfileCometProfilePictureEditThumbnailAction_user"},{args:null,kind:"FragmentSpread",name:"CometProfileNavigationLinkRelayQuery_user"}]}],type:"Profile",abstractKey:"__isProfile"}}();e.exports=a}),null);
__d("ProfileCometProfilePictureMediaPickerPhoto_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"Variable",name:"scale",variableName:"scale"},b={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"ProfileCometProfilePictureMediaPickerPhoto_media",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:[a],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},b,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{alias:"thumbnail_image",args:[a,{kind:"Literal",name:"sizing",value:"cover-fill-cropped"},{kind:"Literal",name:"width",value:105}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[b],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_profile_picture",storageKey:null}],type:"Photo",abstractKey:null}],type:"Media",abstractKey:"__isMedia"}}();e.exports=a}),null);
__d("ProfileCometProfilePictureSetMutation",["CometRelay","WebPixelRatio","ProfileCometProfilePictureSetMutation.graphql","ProfileCometProfilePictureSetMutation_profile.graphql"],(function(a,b,c,d,e,f){"use strict";f.setProfilePicture=a;var g,h,i=g!==void 0?g:g=b("ProfileCometProfilePictureSetMutation.graphql");h!==void 0?h:h=b("ProfileCometProfilePictureSetMutation_profile.graphql");function a(a,c,d){var e=c.caption,f=c.expirationTime,g=c.mediaEffectIDs,h=c.photoID,j=c.profileID,k=c.scaledCropRect,l=c.skipCropping;l=l===void 0?!1:l;var m=c.source;c=c.targetType;b("CometRelay").commitMutation(a,babelHelpers["extends"]({mutation:i,variables:{input:{caption:e,existing_photo_id:h,expiration_time:f==null?null:f+Math.floor(Date.now()/1e3),media_effect_ids:g,profile_id:j,profile_pic_method:"EXISTING",profile_pic_source:(a=m)!=null?a:"UNKNOWN",scaled_crop_rect:k,skip_cropping:l},isPage:c==="page",isProfile:c==="profile",scale:b("WebPixelRatio").get()}},d))}}),null);
__d("ProfileCometProfilePictureTemporaryOptions",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({CUSTOM:-2,DAY:86400,HOUR:3600,MONTH:2592e3,PERMANENT:-1,WEEK:604800});e.exports=a}),null);
__d("ProfileCometExpirationTimeSelector.react",["fbt","CometCardedDialogLoadingState.react","CometSelect.react","CometTimestamp.react","JSResource","ProfileCometProfilePictureEditStrings","ProfileCometProfilePictureTemporaryOptions","React","useCometLazyDialog","useServerTime"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React"),i=b("JSResource")("ProfileCometExpirationTimeSelectorDialog.react").__setRef("ProfileCometExpirationTimeSelector.react"),j=[{label:(c=b("ProfileCometProfilePictureEditStrings")).TEMPORARY_OPTION_ONE_HOUR,value:(d=b("ProfileCometProfilePictureTemporaryOptions")).HOUR},{label:c.TEMPORARY_OPTION_ONE_DAY,value:d.DAY},{label:c.TEMPORARY_OPTION_ONE_WEEK,value:d.WEEK},{label:c.TEMPORARY_OPTION_ONE_MONTH,value:d.MONTH},{label:c.TEMPORARY_OPTION_NEVER,value:d.PERMANENT},{label:c.TEMPORARY_OPTION_CUSTOM,value:d.CUSTOM}],k=function(){return h.jsx(b("CometCardedDialogLoadingState.react"),{title:g._("Switch back to previous profile picture at")})};function a(a){var c=a.disabled;c=c===void 0?!1:c;var d=a.onChange;a=a.value;a=h.useState((a=a)!=null?a:b("ProfileCometProfilePictureTemporaryOptions").PERMANENT);var e=a[0],f=a[1];a=h.useState(null);var g=a[0],l=a[1];a=b("useServerTime")();a=b("CometTimestamp.react").getTimestamp(a,new Date((a=g)!=null?a:0));a=[g!=null?{label:a,value:g}:null].concat(j).filter(Boolean);var m=b("useCometLazyDialog")(i,k),n=m[0];h.useEffect(function(){g!=null?d(Math.ceil((g-Date.now())/1e3)):e===b("ProfileCometProfilePictureTemporaryOptions").PERMANENT?d(null):d(e)},[g,e,d]);return h.jsx(b("CometSelect.react"),{disabled:c,onChange:function(a){a===b("ProfileCometProfilePictureTemporaryOptions").CUSTOM?n({onSelect:function(a){return l(a.getTime())}}):(f(a),l(null))},options:a,selectedValue:(m=g)!=null?m:e,size:"full"})}}),null);
__d("ProfileCometProfilePictureEditDialogReducer",[],(function(a,b,c,d,e,f){"use strict";f.getInitialState=a;f.reducer=b;function a(){return{image:null,isUploading:!1,step:"PICKER"}}function b(a,b){switch(b.type){case"ADD_FRAME":return babelHelpers["extends"]({},a,{step:"FRAME"});case"SELECT_PHOTO":return babelHelpers["extends"]({},a,{image:b.image,step:"PREVIEW"});case"PREVIEW_CANCEL":return babelHelpers["extends"]({},a,{image:null,step:"PICKER"});case"UPLOAD_FAILED":return babelHelpers["extends"]({},a,{isUploading:!1});case"UPLOAD_STARTED":return babelHelpers["extends"]({},a,{isUploading:!0});case"UPLOAD_SUCCESS":return babelHelpers["extends"]({},a,{image:babelHelpers["extends"]({},b.image,{isUploaded:!0}),isUploading:!1,step:a.step==="FRAME"?a.step:"PREVIEW"});case"UPDATE_THUMBNAIL":return babelHelpers["extends"]({},a,{image:b.image,step:"THUMBNAIL"});default:return babelHelpers["extends"]({},a)}}}),null);
__d("ProfileCometProfilePictureEditDialogContext",["ProfileCometProfilePictureEditDialogReducer","React","emptyFunction"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=a.createContext({dispatch:b("emptyFunction"),loadEntryPoint:void 0,state:b("ProfileCometProfilePictureEditDialogReducer").getInitialState()});e.exports=c}),null);
__d("ProfileCometProfilePictureZoomControl.react",["ix","fbt","CometSlider.react","ProfileCometProfilePictureEditStrings","React","TetraIcon.react","clamp","emptyFunction","fbicon","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i=b("React");function a(a){var c=a.disabled;c=c===void 0?!1:c;var d=a.max,e=a.min,f=a.onChange,j=a.step,k=a.value;a=i.useCallback(function(){f(b("clamp")(k-j,e,d))},[d,e,f,j,k]);var l=i.useCallback(function(){f(b("clamp")(k+j,e,d))},[d,e,f,j,k]);return i.jsxs("div",{className:"ozuftl9m n851cfcs tvfksri0 n1l5q3vz taijpn5t j83agx80",children:[i.jsx(b("TetraIcon.react"),{"aria-label":h._("Zoom Out"),color:k===e?"disabled":"primary",disabled:c||k===e,icon:b("fbicon")._(g("531491"),20),onPress:a}),i.jsx("div",{className:"gwi2wbwd h676nmdw oi9244e8",children:i.jsx(b("CometSlider.react"),{label:b("ProfileCometProfilePictureEditStrings").ZOOM_SLIDER,max:d,min:e,onChange:c?b("emptyFunction"):f,step:.01,value:k})}),i.jsx(b("TetraIcon.react"),{"aria-label":h._("Zoom In"),color:k===d?"disabled":"primary",disabled:c||k===d,icon:b("fbicon")._(g("483769"),20),onPress:l})]})}}),null);
__d("ProfileCometProfilePictureZoomCropImage.react",["ix","CometImage.react","ProfileCometProfilePictureEditStrings","React","TetraIcon.react","TetraText.react","clamp","fbicon","stylex","useGlobalEventListener"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function i(a,b,c){var d=(.5-a[0])*b[0]*c;a=(.5-a[1])*b[1]*c;return{transform:"translate3d("+d+"px, "+a+"px, 0) scale("+c+")"}}function j(a){switch(a){case"circle":return{WebkitMaskImage:"-webkit-radial-gradient(white, black)",borderRadius:"50%"};case"rect":default:return{}}}function k(a){return{height:a[1]+"px",width:a[0]+"px"}}function l(a,b){var c=-(b[0]-a[0])/2;b=-(b[1]-a[1])/2;return{transform:"translate("+c+"px, "+b+"px)"}}function m(a,c,d,e){var f=c[0]/2/(d[0]*e);c=c[1]/2/(d[1]*e);return[b("clamp")(a[0],f,1-f),b("clamp")(a[1],c,1-c)]}function a(a){var c=a.center,d=a.cropShape;d=d===void 0?"circle":d;var e=a.cropSize,f=a.disabled,n=f===void 0?!1:f,o=a.imageSize;f=a.imageSrc;var p=a.onMove,q=a.showCropped;q=q===void 0?!1:q;a=a.zoom;var r=a===void 0?1:a,s=h.useRef([0,0]),t=h.useRef([0,0]),u=h.useRef(1);a=h.useState(!1);var v=a[0],w=a[1];a=h.useState(!0);var x=a[0],y=a[1];a=h.useCallback(function(a){a.preventDefault()},[]);var z=h.useCallback(function(a){if(n)return;w(!0);y(!1);s.current=[a.clientX,a.clientY];t.current=c},[c,n]),A=h.useCallback(function(a){w(!1),a.stopPropagation()},[]),B=h.useCallback(function(a){if(!v)return;var b=a.clientX-s.current[0];a=a.clientY-s.current[1];b=[t.current[0]-b/(o[0]*u.current),t.current[1]-a/(o[1]*u.current)];p(m(b,e,o,u.current))},[e,o,v,p]);h.useEffect(function(){r!==u.current&&(u.current=r,p(m(c,e,o,r)))},[c,e,o,p,r]);b("useGlobalEventListener")("mousemove",v?B:null,{capture:!0});b("useGlobalEventListener")("mouseup",v?A:null,{capture:!0});return h.jsxs("div",{className:"k4urcfbm l9j0dhe7 stjgntxs ni8dbmo4 datstx6m",children:[h.jsxs("div",{className:"ke6wolob rk01pc8j l9j0dhe7 f9o22wc5 ad2k81qe"+(q?" stjgntxs ni8dbmo4":""),style:k(e),children:[h.jsx("div",{className:"l9j0dhe7 stjgntxs ni8dbmo4",style:babelHelpers["extends"]({},j(d),k(e)),children:h.jsx("div",{className:"pmk7jnqg soycq5t1",style:l(e,o),children:h.jsx("div",{style:i(c,o,u.current),children:h.jsx(b("CometImage.react"),{src:f})})})}),h.jsx("div",{className:"kr520xx4 pmk7jnqg akz8cqyu soycq5t1",style:l(e,o),children:h.jsx("div",{className:"a7woen2v",onDragStart:a,onMouseDown:z,style:i(c,o,u.current),children:h.jsx(b("CometImage.react"),{src:f})})})]}),!n&&x&&h.jsxs("div",{className:"cj5g2342 adce92kx kfkz5moi pmk7jnqg cxgpxx05 tw6a2znq d1544ag0 sj5x9vvc j83agx80 l82x9zwi uo3d90p7 pw54ja7n ue3kfks5 ora8z2hr bp9cbjyn",children:[h.jsx("div",{className:"oi9244e8 j83agx80",children:h.jsx(b("TetraIcon.react"),{color:"white",icon:b("fbicon")._(g("697185"),20)})}),h.jsx(b("TetraText.react"),{color:"white",type:"headlineEmphasized4",children:b("ProfileCometProfilePictureEditStrings").DRAG_INSTRUCTIONS})]})]})}}),null);
__d("ProfileCometProfilePictureZoomCrop.react",["ProfileCometProfilePictureZoomControl.react","ProfileCometProfilePictureZoomCropImage.react","React","clamp","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i={"default":{height:"cmsa8f9s",width:"f36cnskx"}},j=5,k=180;function l(a){return Number(a.toFixed(j))}function m(a,b){b=Math.max(a[0]/b[0],a[1]/b[1]);a=Math.max(Math.min(a[0]/k,a[1]/k),b);return[l(b),l(a)]}function n(a){return a[0]/a[1]===1}function a(a){var c=a.cropShape;c=c===void 0?"circle":c;var d=a.cropSize,e=a.disabled;e=e===void 0?!1:e;var f=a.imageSize,j=a.imageSrc,k=a.onChange,o=a.showCropped;o=o===void 0?!1:o;a=a.xstyle;var p=m(d,f),q=h.useState(p[0]),r=q[0],s=q[1];q=h.useState([.5,.5]);var t=q[0],u=q[1];q=!(r===p[0]&&n(f));var v=h.useCallback(function(a){u(a)},[]),w=h.useCallback(function(a){s(a)},[]);h.useEffect(function(){var a,c=d[1]/(f[1]*r),e=d[0]/(f[0]*r),g=t[0]-e/2,h=t[1]-c/2;c=l((a=b("clamp"))(c,0,1));e=l(a(e,0,1));k({height:c,width:e,x:l(a(g,0,1-e)),y:l(a(h,0,1-c))})},[t,d,f,k,r]);return h.jsxs("div",{children:[h.jsx("div",{className:(g||(g=b("stylex")))((a=a)!=null?a:i["default"]),children:h.jsx(b("ProfileCometProfilePictureZoomCropImage.react"),{center:t,cropShape:c,cropSize:d,disabled:e||!q,imageSize:f,imageSrc:j,onMove:v,showCropped:o,zoom:r})}),h.jsx(b("ProfileCometProfilePictureZoomControl.react"),{disabled:e,max:p[1],min:p[0],onChange:w,step:.1,value:r})]})}}),null);
__d("ProfileCometProfilePictureEditPreview.react",["ix","fbt","BaseRow.react","BaseRowItem.react","CometCard.react","CometFormTextArea.react","CometProgressIndicator.react","CometRelay","CometRow.react","CometRowItem.react","ProfileCometExpirationTimeSelector.react","ProfileCometProfilePictureEditStrings","ProfileCometProfilePictureSetMutation","ProfileCometProfilePictureTemporaryOptions","ProfileCometProfilePictureZoomCrop.react","React","TetraButton.react","TetraIcon.react","TetraText.react","fbicon","gkx","logCometFunnelEvent","qex","stylex","useIsMountedRef","useProfileEngagementClickCallback","useProfileEngagementImpression","$InternalEnum"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=b("React"),k={cancelButton:{marginEnd:"cgat1ltu"},description:{paddingTop:"discj3wi",paddingEnd:"hv4rvrfc",paddingBottom:"ihqw7lf3",paddingStart:"dati1w0a"},footerWithDivider:{alignItems:"bp9cbjyn",borderTop:"l6v480f0",display:"j83agx80",justifyContent:"bkfpd7mw",paddingTop:"discj3wi",paddingEnd:"hv4rvrfc",paddingBottom:"ihqw7lf3",paddingStart:"dati1w0a"},privacyDisclaimer:{alignItems:"bp9cbjyn",display:"j83agx80",marginBottom:"sjgh65i0",marginEnd:"wkznzc2l",marginStart:"dhix69tm"},privacyIcon:{display:"j83agx80",marginEnd:"tvfksri0"},privacyText:{display:"j83agx80"},saveButton:{marginStart:"kkf49tns"},savingIndicator:{marginEnd:"cgat1ltu"},skipCroppingButton:{marginEnd:"tvfksri0"},skipCroppingMessage:{backgroundColor:"ora8z2hr",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4",width:"k4urcfbm"},spacingBottom:{marginBottom:"sjgh65i0",marginEnd:"wkznzc2l",marginStart:"dhix69tm"},temporaryInput:{alignItems:"bp9cbjyn",display:"j83agx80",justifyContent:"i1fnvgqd",paddingBottom:"f10w8fjw",paddingEnd:"hv4rvrfc",paddingStart:"dati1w0a",paddingTop:"pybr56ya"},zoomCrop:{position:"l9j0dhe7"}},l=b("$InternalEnum")({Crop:"crop_photo",None:"none",SkipCropping:"skip_cropping"}),m=300;function a(a){var c=a.canMakeTemporary;c=c===void 0?!1:c;var d=a.canSkipCropping;d=d===void 0?!1:d;var e=a.onCancel,f=a.onSaveSuccess,n=a.photo,o=a.profileID,p=a.source,q=a.targetType;a=a.xstyle;var r=b("CometRelay").useRelayEnvironment(),s=j.useRef(null),t=j.useState(""),u=t[0],v=t[1],w=b("useIsMountedRef")();t=j.useState(!1);var x=t[0],y=t[1];t=(t=b("qex")._("1673143"))!=null?t:"none";var z=d?l.cast(t):l.None;d=j.useState(!1);var A=d[0],B=d[1];d=j.useState(!1);var C=d[0],D=d[1];d=j.useState(b("ProfileCometProfilePictureTemporaryOptions").WEEK);var E=d[0];d=d[1];var F=j.useCallback(function(){var a=z===l.SkipCropping?A:z===l.Crop?!A:!1;y(!0);b("ProfileCometProfilePictureSetMutation").setProfilePicture(r,{caption:u,expirationTime:C?E:null,photoID:n.id,profileID:o,scaledCropRect:s.current||void 0,skipCropping:a,source:p||void 0,targetType:q},{onCompleted:function(){b("logCometFunnelEvent").logCometFunnelEvent("ProfileCometTimelineWebFunnelDefinition","[action][profile picture edit dialog][save success]"),f()},onError:function(a){b("logCometFunnelEvent").logCometFunnelEvent("ProfileCometTimelineWebFunnelDefinition","[action][profile picture edit dialog][save error]",{actionPayload:{error:a.description}}),w.current&&y(!1)}})},[z,A,r,u,C,E,n.id,o,p,q,f,w]),G=j.useCallback(function(a){s.current=a},[]),H=j.useCallback(function(a){v(a)},[]);b("logCometFunnelEvent").useLogCometFunnelImpressionEvent("ProfileCometTimelineWebFunnelDefinition","[impression][profile picture edit dialog][edit thumbnail]");var I=b("useProfileEngagementImpression")({item_subtype:t,item_type:"cropping_button",product_bucket:"profile_core",surface:"profile_photo"});t=b("useProfileEngagementClickCallback")({item_subtype:t,item_type:"cropping_button",product_bucket:"profile_core",surface:"profile_photo"},function(){return B(!A)});var J=j.jsx(b("ProfileCometProfilePictureZoomCrop.react"),{cropSize:[m,m],disabled:x,imageSize:[n.width,n.height],imageSrc:n.uri,onChange:G,xstyle:a}),K=J,L=null;z===l.SkipCropping?(K=j.jsx(j.Fragment,{children:A?j.jsxs("div",{className:(i||(i=b("stylex")))(k.zoomCrop),children:[J,j.jsx("div",{className:(i||(i=b("stylex")))(k.skipCroppingMessage),children:j.jsxs(b("CometRow.react"),{align:"center",expanding:!0,paddingHorizontal:0,paddingVertical:12,children:[j.jsx(b("CometRowItem.react"),{verticalAlign:"center",children:j.jsx(b("TetraIcon.react"),{color:"white",icon:b("fbicon")._(g("479180"),20)})}),j.jsx(b("CometRowItem.react"),{verticalAlign:"center",children:j.jsx(b("TetraText.react"),{color:"white",type:"meta3",children:h._("The entire photo will be saved as your profile picture. Reposition the photo to set the thumbnail.")})})]})})]}):J}),L=j.jsx("div",{ref:I,children:j.jsx(b("BaseRowItem.react"),{xstyle:k.skipCroppingButton,children:j.jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("482559"),16),label:h._("Skip Cropping"),onPress:t,reduceEmphasis:A,type:A?"primary":"secondary"})})})):z===l.Crop&&(K=j.jsx(b("ProfileCometProfilePictureZoomCrop.react"),{cropSize:[m,m],disabled:x,imageSize:[n.width,n.height],imageSrc:n.uri,onChange:G,showCropped:A,xstyle:a}),L=j.jsx("div",{ref:I,children:j.jsx(b("BaseRowItem.react"),{xstyle:k.skipCroppingButton,children:j.jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("482559"),16),label:h._("Crop Photo"),onPress:t,reduceEmphasis:A,ref:I,type:A?"primary":"secondary"})})}));return j.jsxs("div",{children:[!n.isProfilePicture&&j.jsx("div",{className:(i||(i=b("stylex")))(k.description),children:j.jsx(b("CometFormTextArea.react"),{label:b("ProfileCometProfilePictureEditStrings").ADD_DESCRIPTION,minRows:2,onValueChange:H,value:u})}),K,(L!==null||c)&&!n.isProfilePicture&&j.jsxs(b("BaseRow.react"),{align:"center",xstyle:k.spacingBottom,children:[L,c&&j.jsx(b("BaseRowItem.react"),{children:j.jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("478793"),16),label:b("ProfileCometProfilePictureEditStrings").MAKE_TEMPORARY,onPress:function(){return D(!C)},reduceEmphasis:C,type:C?"primary":"secondary"})})]}),C&&j.jsx(b("BaseRow.react"),{xstyle:k.spacingBottom,children:j.jsx(b("BaseRowItem.react"),{expanding:!0,children:j.jsx(b("CometCard.react"),{border:"solid",dropShadow:1,children:j.jsxs("div",{className:(i||(i=b("stylex")))(k.temporaryInput),children:[j.jsx(b("TetraText.react"),{type:"body3",children:b("ProfileCometProfilePictureEditStrings").TEMPORARY_PROFILE_PIC_CONTROL}),j.jsx(b("ProfileCometExpirationTimeSelector.react"),{disabled:x,onChange:d,value:E})]})})})}),b("gkx")("1224637")?null:j.jsxs("div",{className:(i||(i=b("stylex")))(k.privacyDisclaimer),children:[j.jsx("div",{className:(i||(i=b("stylex")))(k.privacyIcon),children:j.jsx(b("TetraIcon.react"),{color:"secondary",icon:b("fbicon")._(g("560120"),20)})}),j.jsx("div",{className:(i||(i=b("stylex")))(k.privacyText),children:j.jsx(b("TetraText.react"),{color:"secondary",type:"body2",children:b("ProfileCometProfilePictureEditStrings").PRIVACY_DISCLAIMER})})]}),j.jsxs("div",{className:(i||(i=b("stylex")))(k.footerWithDivider),children:[j.jsx("div",{className:i(k.cancelButton),children:x?j.jsx("div",{className:(i||(i=b("stylex")))(k.savingIndicator),children:j.jsx(b("CometProgressIndicator.react"),{})}):j.jsx(b("TetraButton.react"),{label:b("ProfileCometProfilePictureEditStrings").CANCEL,onPress:e,reduceEmphasis:!0,type:"secondary"})}),j.jsx("div",{className:i(k.saveButton),children:j.jsx(b("TetraButton.react"),{disabled:x,label:b("ProfileCometProfilePictureEditStrings").SAVE,onPress:F,padding:"wide",testid:void 0})})]})]})}}),null);
__d("ProfileCometProfilePictureEditPreviewDialog.react",["Actor","CometCardedDialog.react","ProfileCometProfilePictureEditPreview.react","ProfileCometProfilePictureEditStrings","React","useIsMountedRef"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.onClose,d=a.photo;a=a.source;var e=b("Actor").useActor();e=e[0];var f=b("useIsMountedRef")(),h=g.useCallback(function(){f.current&&c()},[f,c]);return g.jsx(b("CometCardedDialog.react"),{onClose:c,size:"medium",title:b("ProfileCometProfilePictureEditStrings").DIALOG_TITLE,withCloseButton:!0,children:g.jsx(b("ProfileCometProfilePictureEditPreview.react"),{canMakeTemporary:!0,canSkipCropping:!0,onCancel:c,onSaveSuccess:h,photo:d,profileID:e,source:a,targetType:"profile"})})}}),null);
__d("ProfileCometProfilePictureMediaPickerPhoto.react",["CometBackgroundImage.react","CometPressable.react","CometRelay","ProfileCometProfilePictureEditDialogContext","ProfileCometProfilePictureEditStrings","React","getRoundedCorners","stylex","ProfileCometProfilePictureMediaPickerPhoto_media.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=b("React"),j=b("getRoundedCorners").CORNERS,k=b("getRoundedCorners").hasCorner,l={borderBottomEndRadius:{borderBottomEndRadius:"uo3d90p7"},borderBottomStartRadius:{borderBottomStartRadius:"l82x9zwi"},borderTopEndRadius:{borderTopEndRadius:"pw54ja7n"},borderTopStartRadius:{borderTopStartRadius:"ue3kfks5"},imageBorder:{bottom:"i09qtzwb",boxSizing:"rq0escxv",end:"n7fi1qx3",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4",boxShadow:"oaz4zybt"},root:{height:"datstx6m",overflowX:"ni8dbmo4",overflowY:"stjgntxs",position:"l9j0dhe7",width:"k4urcfbm"}};function a(a){var c=a.media,d=a.roundCorner,e=b("CometRelay").useFragment(g!==void 0?g:g=b("ProfileCometProfilePictureMediaPickerPhoto_media.graphql"),c);c=((a=e.thumbnail_image)==null?void 0:a.uri)||"";var f=e.id||"",m=((a=e.image)==null?void 0:a.height)||0,n=((a=e.image)==null?void 0:a.uri)||"",o=((a=e.image)==null?void 0:a.width)||0;a=(a=e==null?void 0:e.accessibility_caption)!=null?a:b("ProfileCometProfilePictureEditStrings").SELECT_PHOTO;var p=i.useContext(b("ProfileCometProfilePictureEditDialogContext")),q=p.dispatch;p=p.state;var r=i.useCallback(function(){return q({image:{height:m,id:f,isProfilePicture:e.is_profile_picture||!1,uri:n,width:o},type:"SELECT_PHOTO"})},[q,m,f,n,o,e.is_profile_picture]),s=[j.BOTTOM_END,j.BOTTOM_START,j.TOP_END,j.TOP_START].map(function(a){return k(d,a)}),t=s[0],u=s[1],v=s[2];s=s[3];return i.jsxs(b("CometPressable.react"),{disabled:p.isUploading,onPress:r,xstyle:[l.root,t&&l.borderBottomEndRadius,u&&l.borderBottomStartRadius,v&&l.borderTopEndRadius,s&&l.borderTopStartRadius],children:[i.jsx(b("CometBackgroundImage.react"),{alt:a,src:c}),i.jsx("div",{className:(h||(h=b("stylex")))(t?l.borderBottomEndRadius:null,u?l.borderBottomStartRadius:null,v?l.borderTopEndRadius:null,s?l.borderTopStartRadius:null,l.imageBorder)})]})}}),null);
__d("ProfileCometProfilePictureMediaUploadAction.react",["CometFileSelector.react","ProfileCometProfilePictureEditDialogContext","React","XProfilePicUploadAsyncController","logCometFunnelEvent","useCometAlertDialog","useProfileCometPhotoUploader"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.children,d=a.profileID;a=g.useContext(b("ProfileCometProfilePictureEditDialogContext"));var e=a.dispatch;a=b("useCometAlertDialog")();var f=a[0],h=b("useProfileCometPhotoUploader")(),i=g.useCallback(function(a){var c;b("logCometFunnelEvent").logCometFunnelEvent("ProfileCometTimelineWebFunnelDefinition","[action][profile picture edit dialog][upload success]");e({image:{height:(c=a.imageHeight)!=null?c:0,id:a.fbid,isProfilePicture:!1,uri:(c=a.imageURI)!=null?c:"",width:(c=a.imageWidth)!=null?c:0},type:"UPLOAD_SUCCESS"})},[e]),j=g.useCallback(function(a){b("logCometFunnelEvent").logCometFunnelEvent("ProfileCometTimelineWebFunnelDefinition","[action][profile picture edit dialog][upload error]",{actionPayload:{error:a.description}}),e({type:"UPLOAD_FAILED"}),f({body:a.description,title:a.summary})},[e,f]);a=g.useCallback(function(a){if(!a.length)return;e({type:"UPLOAD_STARTED"});var c=b("XProfilePicUploadAsyncController").getURIBuilder().setInt("profile_id",d).setEnum("photo_source",57).getURI();h(c,a[0],{onFailed:j,onSucceeded:i})},[e,j,i,d,h]);return g.jsx(b("CometFileSelector.react"),{accept:["image/*","image/heif","image/heic"],onFilesSelected:a,children:function(a){return c(a)}})}}),null);